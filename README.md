# 지하철 노선도 미션
[ATDD 강의](https://edu.nextstep.camp/c/R89PYi5H) 실습을 위한 지하철 노선도 애플리케이션

---
## 🚀 1단계 - 경로 조회 타입 추가

### 기능 요구사항 - 최소 시간 경로 타입 추가
- [x] 경로 조회 시 최소 시간 기준으로 조회할 수 있도록 기능을 추가
- [x] 노선추가 & 구간 추가 시 거리와 함께 소요시간 정보도 추가
- [x] 인수 테스트 (수정) -> 문서화 -> 기능 구현 순으로 진행
- [x] 개발 흐름을 파악할 수 있도록 커밋을 작은 단위로 나누어 구현

### 프로그래밍 요구사항
- [x] 인수 테스트 주도 개발 프로세스에 맞춰서 기능을 구현
    - [x] 요구사항 설명을 참고하여 인수 조건을 정의
    - [x] 인수 조건을 검증하는 인수 테스트 작성
    - [x] 인수 테스트를 충족하는 기능 구현
- [x] 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성
    - [x] 뼈대 코드의 인수 테스트를 참고
- [x] 인수 테스트 이후 기능 구현은 TDD로 진행
    - [x] 도메인 레이어 테스트는 필수
    - [ ] 서비스 레이어 테스트는 선택

### 요구사항 설명
#### 인수 조건
```
Feature: 지하철 경로 검색

  Scenario: 두 역의 최소 시간 경로를 조회
    Given 지하철역이 등록되어있음
    And 지하철 노선이 등록되어있음
    And 지하철 노선에 지하철역이 등록되어있음
    When 출발역에서 도착역까지의 최소 시간 기준으로 경로 조회를 요청
    Then 최소 시간 기준 경로를 응답
    And 총 거리와 소요 시간을 함께 응답함
```

#### 요청 api 수정
- source: 출발역 id 
- target: 도착역 id 
- type: 거리 or 시간
```
HTTP/1.1 200 
Request method:	GET
Request URI:	http://localhost:55494/paths?source=1&target=3&type=DURATION
Headers: 	Accept=application/json
		Content-Type=application/json; charset=UTF-8
```

#### 소요 시간 추가
- 경로 조회 시 총 소요 시간을 조회하기 위해서는 노선과 구간을 생성할 때 소요 시간 정보를 함께 보내야 합니다.
```
public class LineRequest {
    private String name;
    private String color;
    private Long upStationId;
    private Long downStationId;
    private int distance;
    private int duration;
    
    ...
```

---
## 🚀 2단계 - 요금 조회

### 기능 요구사항 - 최소 시간 경로 타입 추가
- [x] 경로 조회 결과에 요금 정보를 포함
- [x] 개발 흐름을 파악할 수 있도록 커밋을 작은 단위로 나누어 구현

### 프로그래밍 요구사항
- [x] 인수 테스트 주도 개발 프로세스에 맞춰서 기능을 구현
  - [x] 요구사항 설명을 참고하여 인수 조건을 정의
  - [x] 인수 조건을 검증하는 인수 테스트 작성
  - [x] 인수 테스트를 충족하는 기능 구현
- [x] 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성
  - [x] 뼈대 코드의 인수 테스트를 참고
- [x] 인수 테스트 이후 기능 구현은 TDD로 진행
  - [x] 도메인 레이어 테스트는 필수
  - [ ] 서비스 레이어 테스트는 선택

### 요구사항 설명
#### 인수 조건
```
Feature: 지하철 경로 검색

  Scenario: 두 역의 최단 거리 경로를 조회
    Given 지하철역이 등록되어있음
    And 지하철 노선이 등록되어있음
    And 지하철 노선에 지하철역이 등록되어있음
    When 출발역에서 도착역까지의 최단 거리 경로 조회를 요청
    Then 최단 거리 경로를 응답
    And 총 거리와 소요 시간을 함께 응답함
    And 지하철 이용 요금도 함께 응답함
```
#### 요금 계산 방법
- 기본운임(10㎞ 이내) : 기본운임 1,250원
- 이용 거리초과 시 추가운임 부과
  - 10km초과∼50km까지(5km마다 100원)
  - 50km초과 시 (8km마다 100원)
```
9km = 1250원
12km = 10km + 2km = 1350원
16km = 10km + 6km = 1450원
```

---
## 🚀 3단계 - 경로 조회 타입 추가

### 기능 요구사항 - 최소 시간 경로 타입 추가
- [x] 추가된 요금 정책을 반영
- [x] 개발 흐름을 파악할 수 있도록 커밋을 작은 단위로 나누어 구현

### 프로그래밍 요구사항
- [x] 인수 테스트 주도 개발 프로세스에 맞춰서 기능을 구현
  - [x] 요구사항 설명을 참고하여 인수 조건을 정의
  - [x] 인수 조건을 검증하는 인수 테스트 작성
  - [x] 인수 테스트를 충족하는 기능 구현
- [x] 인수 조건은 인수 테스트 메서드 상단에 주석으로 작성
  - [x] 뼈대 코드의 인수 테스트를 참고
- [x] 인수 테스트 이후 기능 구현은 TDD로 진행
  - [x] 도메인 레이어 테스트는 필수
  - [ ] 서비스 레이어 테스트는 선택

### 요구사항 설명
#### 노선별 추가 요금
- [x]  추가 요금이 있는 노선을 이용 할 경우 측정된 요금에 추가 
  - ex) 900원 추가 요금이 있는 노선 8km 이용 시 1,250원 -> 2,150원 
  - ex) 900원 추가 요금이 있는 노선 12km 이용 시 1,350원 -> 2,250원
- [x] 경로 중 추가요금이 있는 노선을 환승 하여 이용 할 경우 가장 높은 금액의 추가 요금만 적용 
  - ex) 0원, 500원, 900원의 추가 요금이 있는 노선들을 경유하여 8km 이용 시 1,250원 -> 2,150원
#### 로그인 사용자의 경우 연령별 요금으로 계산
- [x] 청소년: 운임에서 350원을 공제한 금액의 20%할인
- [x] 어린이: 운임에서 350원을 공제한 금액의 50%할인
```
- 청소년: 13세 이상~19세 미만
- 어린이: 6세 이상~ 13세 미만
```


